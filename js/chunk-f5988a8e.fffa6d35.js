(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f5988a8e"],{"0cb2":function(e,t,n){var a=n("e330"),c=n("7b0b"),o=Math.floor,r=a("".charAt),l=a("".replace),i=a("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,a,u,b){var p=n+e.length,g=a.length,m=d;return void 0!==u&&(u=c(u),m=s),l(b,m,(function(c,l){var s;switch(r(l,0)){case"$":return"$";case"&":return e;case"`":return i(t,0,n);case"'":return i(t,p);case"<":s=u[i(l,1,-1)];break;default:var d=+l;if(0===d)return c;if(d>g){var b=o(d/10);return 0===b?c:b<=g?void 0===a[b-1]?r(l,1):a[b-1]+r(l,1):c}s=a[d-1]}return void 0===s?"":s}))}},"1fae":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c={class:"container text-left mt-3"},o={class:"row py-3"},r={class:"col-md-12"},l={class:"table table-hover mt-4"},i=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{width:"150"},"產品名稱"),Object(a["g"])("th",{width:"120"},"原價"),Object(a["g"])("th",{width:"120"},"售價"),Object(a["g"])("th",{width:"150"},"是否啟用"),Object(a["g"])("th",{width:"120"},"編輯"),Object(a["g"])("th",{width:"120"},"刪除")])],-1),s={width:"150"},d={width:"120"},u={width:"120"},b={width:"150"},p={key:0,class:"text-success"},g={key:1,class:"text-danger"},m={width:"120"},f=["onClick"],h={width:"120"},j=["onClick"],O={class:"mb-3"},v=Object(a["h"])("目前有 "),w=Object(a["h"])(" 項產品"),y={class:"modal fade",id:"productModal",ref:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},k={class:"modal fade",id:"delProductModal",ref:"delProductModal",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"};function T(e,t,n,T,x,M){var U=Object(a["x"])("Pagination"),C=Object(a["x"])("ProductModals"),$=Object(a["x"])("DelModal");return Object(a["s"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",c,[Object(a["g"])("div",o,[Object(a["g"])("div",r,[Object(a["g"])("button",{class:"btn btn-primary ms-auto",type:"button",onClick:t[0]||(t[0]=function(e){return M.judgeModal("new")})},"新增產品"),Object(a["g"])("table",l,[i,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["w"])(x.products,(function(e){return Object(a["s"])(),Object(a["f"])("tr",{key:e.id},[Object(a["g"])("td",s,Object(a["z"])(e.title),1),Object(a["g"])("td",d,Object(a["z"])(M.convertToAmount(e.origin_price))+" 元",1),Object(a["g"])("td",u,Object(a["z"])(M.convertToAmount(e.price))+" 元",1),Object(a["g"])("td",b,[e.is_enabled?(Object(a["s"])(),Object(a["f"])("span",p,"啟用")):(Object(a["s"])(),Object(a["f"])("span",g,"未啟用"))]),Object(a["g"])("td",m,[Object(a["g"])("button",{class:"btn btn-primary",type:"button",onClick:function(t){return M.judgeModal("edit",e)}},"編輯",8,f)]),Object(a["g"])("td",h,[Object(a["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:function(t){return M.judgeModal("delete",e)}},"刪除",8,j)])])})),128))])]),Object(a["g"])("p",O,[v,Object(a["g"])("span",null,Object(a["z"])(x.products.length),1),w]),Object(a["i"])(U,{pagination:x.pagination,onChangePage:M.getProducts},null,8,["pagination","onChangePage"])])])]),Object(a["g"])("div",y,[Object(a["i"])(C,{temp:x.temp,onGetProducts:M.getProducts,"product-modal":x.productModal},null,8,["temp","onGetProducts","product-modal"])],512),Object(a["g"])("div",k,[Object(a["i"])($,{temp:x.temp,onGetProducts:M.getProducts,"del-model":x.delModel},null,8,["temp","onGetProducts","del-model"])],512)],64)}var x=n("5530"),M=(n("99af"),n("ac1f"),n("1276"),n("d3b7"),n("25f0"),n("5319"),n("a15b"),n("7c2b")),U=n.n(M),C=n("1799"),$=n("6ff1"),P=(n("a4d3"),n("e01a"),{class:"modal-dialog modal-xl"}),F={class:"modal-content border-0"},S={class:"modal-header bg-info text-white"},I={class:"modal-title",id:"productModalLabel"},V={key:0},_={key:1},A=Object(a["g"])("button",{class:"btn-close",type:"button","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},E={class:"row"},J={class:"col-sm-4"},z={class:"mb-2"},G={class:"mb-3"},N=Object(a["g"])("label",{class:"form-label",for:"imageUrl"},"輸入圖片網址",-1),R=["src"],B={key:0},L={key:0},q={class:"mb-3"},H=Object(a["g"])("label",{class:"form-label",for:"imageUrl"},"圖片網址",-1),K=["onUpdate:modelValue"],Q=["src"],W=["onChange"],X=["onClick"],Y={key:1},Z={key:1},ee={class:"col-sm-8"},te={class:"mb-3"},ne=Object(a["g"])("label",{class:"form-label",for:"title"},"標題",-1),ae={class:"row"},ce={class:"mb-3 col-md-6"},oe=Object(a["g"])("label",{class:"form-label",for:"category"},"分類",-1),re={class:"mb-3 col-md-6"},le=Object(a["g"])("label",{class:"form-label",for:"price"},"單位",-1),ie={class:"row"},se={class:"mb-3 col-md-6"},de=Object(a["g"])("label",{class:"form-label",for:"origin_price"},"原價",-1),ue={class:"mb-3 col-md-6"},be=Object(a["g"])("label",{class:"form-label",for:"price"},"售價",-1),pe=Object(a["g"])("hr",null,null,-1),ge={class:"mb-3"},me=Object(a["g"])("label",{class:"form-label",for:"description"},"產品描述",-1),fe={class:"mb-3"},he=Object(a["g"])("label",{class:"form-label",for:"content"},"說明內容",-1),je={class:"mb-3"},Oe={class:"form-check"},ve=Object(a["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),we={class:"modal-footer"},ye=Object(a["g"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1);function ke(e,t,n,c,o,r){return Object(a["s"])(),Object(a["f"])("div",null,[Object(a["g"])("div",P,[Object(a["g"])("div",F,[Object(a["g"])("div",S,[Object(a["g"])("h5",I,[o.newTemp.id?(Object(a["s"])(),Object(a["f"])("span",V,"編輯產品")):(Object(a["s"])(),Object(a["f"])("span",_,"新增產品"))]),A]),Object(a["g"])("div",D,[Object(a["g"])("div",E,[Object(a["g"])("div",J,[Object(a["g"])("div",z,[Object(a["g"])("div",G,[N,Object(a["F"])(Object(a["g"])("input",{class:"form-control",type:"text",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.newTemp.imageUrl=e})},null,512),[[a["C"],o.newTemp.imageUrl]])]),Object(a["g"])("img",{class:"img-fluid",src:o.newTemp.imageUrl,alt:""},null,8,R),Object(a["g"])("input",{type:"file",class:"mb-3",ref:"fileInput",onChange:t[1]||(t[1]=function(e){return r.upload(e,"single")})},null,544)]),o.newTemp.imagesUrl?(Object(a["s"])(),Object(a["f"])("div",B,[o.newTemp.imagesUrl.length?(Object(a["s"])(),Object(a["f"])("h2",L,"更多圖片")):Object(a["e"])("",!0),(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["w"])(o.newTemp.imagesUrl,(function(e,t){return Object(a["s"])(),Object(a["f"])("div",{class:"mb-1",key:t},[Object(a["g"])("div",q,[H,Object(a["F"])(Object(a["g"])("input",{class:"form-control mb-2","onUpdate:modelValue":function(e){return o.newTemp.imagesUrl[t]=e},type:"text",placeholder:"請輸入圖片連結"},null,8,K),[[a["C"],o.newTemp.imagesUrl[t]]])]),Object(a["g"])("img",{class:"img-fluid mb-2",src:e},null,8,Q),Object(a["g"])("input",{type:"file",class:"mb-3",ref_for:!0,ref:"morefileInput",onChange:function(e){return r.upload(e,"morePic",t)}},null,40,W),Object(a["g"])("input",{class:"btn btn-outline-danger w-100",type:"button",value:"刪除圖片",onClick:function(e){return r.delImage(t)}},null,8,X)])})),128)),!o.newTemp.imagesUrl.length||o.newTemp.imagesUrl[o.newTemp.imagesUrl.length-1]?(Object(a["s"])(),Object(a["f"])("div",Y,[Object(a["g"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[2]||(t[2]=function(e){return o.newTemp.imagesUrl.push("")})},"新增圖片")])):Object(a["e"])("",!0)])):(Object(a["s"])(),Object(a["f"])("div",Z,[Object(a["g"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=function(){return r.createImages&&r.createImages.apply(r,arguments)})},"新增圖片")]))]),Object(a["g"])("div",ee,[Object(a["g"])("div",te,[ne,Object(a["F"])(Object(a["g"])("input",{class:"form-control",id:"title",type:"text",placeholder:"請輸入標題","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.newTemp.title=e})},null,512),[[a["C"],o.newTemp.title]])]),Object(a["g"])("div",ae,[Object(a["g"])("div",ce,[oe,Object(a["F"])(Object(a["g"])("input",{class:"form-control",id:"category",type:"text",placeholder:"請輸入分類","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.newTemp.category=e})},null,512),[[a["C"],o.newTemp.category]])]),Object(a["g"])("div",re,[le,Object(a["F"])(Object(a["g"])("input",{class:"form-control",id:"unit",type:"text",placeholder:"請輸入單位","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.newTemp.unit=e})},null,512),[[a["C"],o.newTemp.unit]])])]),Object(a["g"])("div",ie,[Object(a["g"])("div",se,[de,Object(a["F"])(Object(a["g"])("input",{class:"form-control",id:"origin_price",type:"number",min:"0",placeholder:"請輸入原價","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.newTemp.origin_price=e})},null,512),[[a["C"],o.newTemp.origin_price,void 0,{number:!0}]])]),Object(a["g"])("div",ue,[be,Object(a["F"])(Object(a["g"])("input",{class:"form-control",id:"price",type:"number",min:"0",placeholder:"請輸入售價","onUpdate:modelValue":t[8]||(t[8]=function(e){return o.newTemp.price=e})},null,512),[[a["C"],o.newTemp.price,void 0,{number:!0}]])])]),pe,Object(a["g"])("div",ge,[me,Object(a["F"])(Object(a["g"])("textarea",{class:"form-control",id:"description",type:"text",placeholder:"請輸入產品描述","onUpdate:modelValue":t[9]||(t[9]=function(e){return o.newTemp.description=e})},"                    ",512),[[a["C"],o.newTemp.description]])]),Object(a["g"])("div",fe,[he,Object(a["F"])(Object(a["g"])("textarea",{class:"form-control",id:"description",type:"text",placeholder:"請輸入說明內容","onUpdate:modelValue":t[10]||(t[10]=function(e){return o.newTemp.content=e})},"                    ",512),[[a["C"],o.newTemp.content]])]),Object(a["g"])("div",je,[Object(a["g"])("div",Oe,[Object(a["F"])(Object(a["g"])("input",{class:"form-check-input",id:"is_enabled",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[11]||(t[11]=function(e){return o.newTemp.is_enabled=e})},null,512),[[a["B"],o.newTemp.is_enabled]]),ve])])])])]),Object(a["g"])("div",we,[ye,Object(a["g"])("button",{class:"btn btn-primary",type:"button",onClick:t[12]||(t[12]=function(){return r.checkEdit&&r.checkEdit.apply(r,arguments)})},"確認")])])])])}n("e9c4"),n("a434");var Te={data:function(){return{newTemp:{}}},props:["temp","productModal"],watch:{temp:function(){this.newTemp=JSON.parse(JSON.stringify(this.temp))}},methods:{upload:function(e,t,n){var a=this,c=e.target.files[0],o=new FormData;o.append("file-to-upload",c),this.axios.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/upload"),o).then((function(e){alert("上傳成功"),"single"===t?(a.newTemp.imageUrl=e.data.imageUrl,a.$refs.fileInput.value=""):(a.newTemp.imagesUrl[n]=e.data.imageUrl,a.$refs.morefileInput[n].value="",a.$refs.morefileInput.value="")})).catch((function(){alert("上傳失敗")}))},createImages:function(){this.newTemp.imagesUrl=[],this.newTemp.imagesUrl.push("")},delImage:function(e){this.newTemp.imagesUrl.splice(e,1)},checkEdit:function(){var e=this;this.newTemp.id?this.axios.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/product/").concat(this.newTemp.id),{data:this.newTemp}).then((function(t){alert(t.data.message),e.productModal.hide(),e.$emit("getProducts")})).catch((function(e){alert(e.response.data.message)})):this.axios.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/product/"),{data:this.newTemp}).then((function(t){alert(t.data.message),e.productModal.hide(),e.$emit("getProducts")})).catch((function(e){alert(e.response.data.message)}))}}},xe=n("6b0d"),Me=n.n(xe);const Ue=Me()(Te,[["render",ke]]);var Ce=Ue,$e={data:function(){return{products:[],temp:{},pagination:{},productModal:"",delModel:""}},components:{Pagination:C["a"],DelModal:$["a"],ProductModals:Ce},methods:{judgeModal:function(e,t){switch(e){case"new":this.temp={},this.productModal.show();break;case"edit":this.temp=Object(x["a"])({},t),this.productModal.show();break;case"delete":this.temp=Object(x["a"])({},t),this.delModel.show();break;default:break}},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.axios.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/products?page=").concat(t)).then((function(t){e.products=t.data.products,e.pagination=t.data.pagination})).catch((function(e){alert(e.response.data.message)}))},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$"+t.join(".")}},created:function(){this.getProducts()},mounted:function(){this.productModal=new U.a(this.$refs.productModal,{keyboard:!1,backdrop:"static"}),this.delModel=new U.a(this.$refs.delProductModal,{keyboard:!1,backdrop:"static"})}};const Pe=Me()($e,[["render",T]]);t["default"]=Pe},"25f0":function(e,t,n){"use strict";var a=n("e330"),c=n("5e77").PROPER,o=n("6eeb"),r=n("825a"),l=n("3a9b"),i=n("577e"),s=n("d039"),d=n("ad6d"),u="toString",b=RegExp.prototype,p=b[u],g=a(d),m=s((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),f=c&&p.name!=u;(m||f)&&o(RegExp.prototype,u,(function(){var e=r(this),t=i(e.source),n=e.flags,a=i(void 0===n&&l(b,e)&&!("flags"in b)?g(e):n);return"/"+t+"/"+a}),{unsafe:!0})},5319:function(e,t,n){"use strict";var a=n("2ba4"),c=n("c65b"),o=n("e330"),r=n("d784"),l=n("d039"),i=n("825a"),s=n("1626"),d=n("5926"),u=n("50c4"),b=n("577e"),p=n("1d80"),g=n("8aa5"),m=n("dc4a"),f=n("0cb2"),h=n("14c3"),j=n("b622"),O=j("replace"),v=Math.max,w=Math.min,y=o([].concat),k=o([].push),T=o("".indexOf),x=o("".slice),M=function(e){return void 0===e?e:String(e)},U=function(){return"$0"==="a".replace(/./,"$0")}(),C=function(){return!!/./[O]&&""===/./[O]("a","$0")}(),$=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,n){var o=C?"$":"$0";return[function(e,n){var a=p(this),o=void 0==e?void 0:m(e,O);return o?c(o,e,a,n):c(t,b(a),e,n)},function(e,c){var r=i(this),l=b(e);if("string"==typeof c&&-1===T(c,o)&&-1===T(c,"$<")){var p=n(t,r,l,c);if(p.done)return p.value}var m=s(c);m||(c=b(c));var j=r.global;if(j){var O=r.unicode;r.lastIndex=0}var U=[];while(1){var C=h(r,l);if(null===C)break;if(k(U,C),!j)break;var $=b(C[0]);""===$&&(r.lastIndex=g(l,u(r.lastIndex),O))}for(var P="",F=0,S=0;S<U.length;S++){C=U[S];for(var I=b(C[0]),V=v(w(d(C.index),l.length),0),_=[],A=1;A<C.length;A++)k(_,M(C[A]));var D=C.groups;if(m){var E=y([I],_,V,l);void 0!==D&&k(E,D);var J=b(a(c,void 0,E))}else J=f(I,l,V,_,D,c);V>=F&&(P+=x(l,F,V)+J,F=V+I.length)}return P+x(l,F)}]}),!$||!U||C)},a15b:function(e,t,n){"use strict";var a=n("23e7"),c=n("e330"),o=n("44ad"),r=n("fc6a"),l=n("a640"),i=c([].join),s=o!=Object,d=l("join",",");a({target:"Array",proto:!0,forced:s||!d},{join:function(e){return i(r(this),void 0===e?",":e)}})},a434:function(e,t,n){"use strict";var a=n("23e7"),c=n("da84"),o=n("23cb"),r=n("5926"),l=n("07fa"),i=n("7b0b"),s=n("65f0"),d=n("8418"),u=n("1dde"),b=u("splice"),p=c.TypeError,g=Math.max,m=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var n,a,c,u,b,j,O=i(this),v=l(O),w=o(e,v),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=v-w):(n=y-2,a=m(g(r(t),0),v-w)),v+n-a>f)throw p(h);for(c=s(O,a),u=0;u<a;u++)b=w+u,b in O&&d(c,u,O[b]);if(c.length=a,n<a){for(u=w;u<v-a;u++)b=u+a,j=u+n,b in O?O[j]=O[b]:delete O[j];for(u=v;u>v-a+n;u--)delete O[u-1]}else if(n>a)for(u=v-a;u>w;u--)b=u+a-1,j=u+n-1,b in O?O[j]=O[b]:delete O[j];for(u=0;u<n;u++)O[u+w]=arguments[u+2];return O.length=v-a+n,c}})},e01a:function(e,t,n){"use strict";var a=n("23e7"),c=n("83ab"),o=n("da84"),r=n("e330"),l=n("1a2d"),i=n("1626"),s=n("3a9b"),d=n("577e"),u=n("9bf2").f,b=n("e893"),p=o.Symbol,g=p&&p.prototype;if(c&&i(p)&&(!("description"in g)||void 0!==p().description)){var m={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=s(g,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};b(f,p),f.prototype=g,g.constructor=f;var h="Symbol(test)"==String(p("test")),j=r(g.toString),O=r(g.valueOf),v=/^Symbol\((.*)\)[^)]+$/,w=r("".replace),y=r("".slice);u(g,"description",{configurable:!0,get:function(){var e=O(this),t=j(e);if(l(m,e))return"";var n=h?y(t,7,-1):w(t,v,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:f})}},e9c4:function(e,t,n){var a=n("23e7"),c=n("da84"),o=n("d066"),r=n("2ba4"),l=n("e330"),i=n("d039"),s=c.Array,d=o("JSON","stringify"),u=l(/./.exec),b=l("".charAt),p=l("".charCodeAt),g=l("".replace),m=l(1..toString),f=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,j=/^[\uDC00-\uDFFF]$/,O=function(e,t,n){var a=b(n,t-1),c=b(n,t+1);return u(h,e)&&!u(j,c)||u(j,e)&&!u(h,a)?"\\u"+m(p(e,0),16):e},v=i((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&a({target:"JSON",stat:!0,forced:v},{stringify:function(e,t,n){for(var a=0,c=arguments.length,o=s(c);a<c;a++)o[a]=arguments[a];var l=r(d,null,o);return"string"==typeof l?g(l,f,O):l}})}}]);
//# sourceMappingURL=chunk-f5988a8e.fffa6d35.js.map