(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18dfd517"],{"0cb2":function(e,t,a){var l=a("e330"),n=a("7b0b"),c=Math.floor,r=l("".charAt),o=l("".replace),d=l("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,b=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,l,i,u){var O=a+e.length,j=l.length,g=b;return void 0!==i&&(i=n(i),g=s),o(u,g,(function(n,o){var s;switch(r(o,0)){case"$":return"$";case"&":return e;case"`":return d(t,0,a);case"'":return d(t,O);case"<":s=i[d(o,1,-1)];break;default:var b=+o;if(0===b)return n;if(b>j){var u=c(b/10);return 0===u?n:u<=j?void 0===l[u-1]?r(o,1):l[u-1]+r(o,1):n}s=l[b-1]}return void 0===s?"":s}))}},"19b8":function(e,t,a){},"25f0":function(e,t,a){"use strict";var l=a("e330"),n=a("5e77").PROPER,c=a("6eeb"),r=a("825a"),o=a("3a9b"),d=a("577e"),s=a("d039"),b=a("ad6d"),i="toString",u=RegExp.prototype,O=u[i],j=l(b),g=s((function(){return"/a/b"!=O.call({source:"a",flags:"b"})})),f=n&&O.name!=i;(g||f)&&c(RegExp.prototype,i,(function(){var e=r(this),t=d(e.source),a=e.flags,l=d(void 0===a&&o(u,e)&&!("flags"in u)?j(e):a);return"/"+t+"/"+l}),{unsafe:!0})},4437:function(e,t,a){"use strict";a("19b8")},5319:function(e,t,a){"use strict";var l=a("2ba4"),n=a("c65b"),c=a("e330"),r=a("d784"),o=a("d039"),d=a("825a"),s=a("1626"),b=a("5926"),i=a("50c4"),u=a("577e"),O=a("1d80"),j=a("8aa5"),g=a("dc4a"),f=a("0cb2"),p=a("14c3"),h=a("b622"),m=h("replace"),v=Math.max,y=Math.min,k=c([].concat),x=c([].push),w=c("".indexOf),M=c("".slice),A=function(e){return void 0===e?e:String(e)},T=function(){return"$0"==="a".replace(/./,"$0")}(),D=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),$=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,a){var c=D?"$":"$0";return[function(e,a){var l=O(this),c=void 0==e?void 0:g(e,m);return c?n(c,e,l,a):n(t,u(l),e,a)},function(e,n){var r=d(this),o=u(e);if("string"==typeof n&&-1===w(n,c)&&-1===w(n,"$<")){var O=a(t,r,o,n);if(O.done)return O.value}var g=s(n);g||(n=u(n));var h=r.global;if(h){var m=r.unicode;r.lastIndex=0}var T=[];while(1){var D=p(r,o);if(null===D)break;if(x(T,D),!h)break;var $=u(D[0]);""===$&&(r.lastIndex=j(o,i(r.lastIndex),m))}for(var z="",C=0,S=0;S<T.length;S++){D=T[S];for(var F=u(D[0]),_=v(y(b(D.index),o.length),0),P=[],E=1;E<D.length;E++)x(P,A(D[E]));var J=D.groups;if(g){var B=k([F],P,_,o);void 0!==J&&x(B,J);var L=u(l(n,void 0,B))}else L=f(F,o,_,P,J,n);_>=C&&(z+=M(o,C,_)+L,C=_+F.length)}return z+M(o,C)}]}),!$||!T||D)},"67e3":function(e,t,a){"use strict";a.r(t);var l=a("7a23"),n={class:"d-flex justify-content-end"},c={class:"table table-hover"},r=Object(l["g"])("thead",null,[Object(l["g"])("tr",null,[Object(l["g"])("th",{scope:"col",width:"120"},"購買時間"),Object(l["g"])("th",{scope:"col"},"Email"),Object(l["g"])("th",{scope:"col"},"購買品項"),Object(l["g"])("th",{scope:"col"},"應付金額"),Object(l["g"])("th",{scope:"col"},"付款狀態"),Object(l["g"])("th",{scope:"col"},"操作")])],-1),o={class:"productList"},d={key:0,class:"text-success"},s={key:1,class:"text-danger"},b={class:"btn-group",role:"group","aria-label":"Basic example"},i=["onClick"],u=["onClick"],O={class:"mb-3"},j=Object(l["h"])("目前有 "),g=Object(l["h"])(" 筆訂單"),f={class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"},p={class:"modal fade",id:"delOrderModal",ref:"delOrderModal",tabindex:"-1","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"},h={class:"modal fade",id:"orderAllDel",ref:"orderAllDel",tabindex:"-1","aria-labelledby":"orderAllDelLabel","aria-hidden":"true"};function m(e,t,a,m,v,y){var k=Object(l["x"])("Pagination"),x=Object(l["x"])("OrderModal"),w=Object(l["x"])("DelModal"),M=Object(l["x"])("DelAllModal");return Object(l["s"])(),Object(l["f"])(l["a"],null,[Object(l["g"])("div",n,[Object(l["g"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(e){return y.judgeModal("delAll")})},"刪除全部訂單")]),Object(l["g"])("table",c,[r,Object(l["g"])("tbody",null,[(Object(l["s"])(!0),Object(l["f"])(l["a"],null,Object(l["w"])(v.orders,(function(e){return Object(l["s"])(),Object(l["f"])("tr",{key:e.id},[Object(l["g"])("td",null,Object(l["z"])(y.date(e.create_at)),1),Object(l["g"])("td",null,Object(l["z"])(e.user.email),1),Object(l["g"])("td",null,[Object(l["g"])("ul",o,[(Object(l["s"])(!0),Object(l["f"])(l["a"],null,Object(l["w"])(e.products,(function(e){return Object(l["s"])(),Object(l["f"])("li",{key:e.id},Object(l["z"])(e.product.title)+" "+Object(l["z"])(e.qty)+" "+Object(l["z"])(e.product.unit),1)})),128))])]),Object(l["g"])("td",null,Object(l["z"])(y.convertToAmount(e.total))+" 元",1),Object(l["g"])("td",null,[e.is_paid?(Object(l["s"])(),Object(l["f"])("p",d,"已付款")):(Object(l["s"])(),Object(l["f"])("p",s,"未付款"))]),Object(l["g"])("td",null,[Object(l["g"])("div",b,[Object(l["g"])("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:function(t){return y.judgeModal("detail",e)}},"查看",8,i),Object(l["g"])("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:function(t){return y.judgeModal("delete",e)}},"刪除",8,u)])])])})),128))])]),Object(l["g"])("p",O,[j,Object(l["g"])("span",null,Object(l["z"])(v.orders.length),1),g]),Object(l["i"])(k,{pagination:v.pagination,onChangePage:y.getOrders},null,8,["pagination","onChangePage"]),Object(l["g"])("div",f,[Object(l["i"])(x,{temp:v.temp,onGetOrders:y.getOrders,"order-modal":v.orderModal},null,8,["temp","onGetOrders","order-modal"])],512),Object(l["g"])("div",p,[Object(l["i"])(w,{temp:v.temp,onGetOrders:y.getOrders,"del-model":v.delModel},null,8,["temp","onGetOrders","del-model"])],512),Object(l["g"])("div",h,[Object(l["i"])(M,{"del-text":v.delText,onDelAllOrder:y.delAllOrder},null,8,["del-text","onDelAllOrder"])],512)],64)}var v=a("5530"),y=(a("99af"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("5319"),a("a15b"),a("7c2b")),k=a.n(y),x=a("1799"),w=a("6ff1"),M=(a("b0c0"),{class:"modal-dialog modal-xl",role:"document"}),A={class:"modal-content border-0"},T=Object(l["g"])("div",{class:"modal-header bg-dark text-white"},[Object(l["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(l["g"])("span",null,"訂單細節")]),Object(l["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body"},$={class:"row"},z={class:"col-md-4"},C=Object(l["g"])("h3",null,"用戶資料",-1),S={class:"table"},F={key:0},_=Object(l["g"])("th",{style:{width:"100px"}},"姓名",-1),P=Object(l["g"])("th",null,"Email",-1),E=Object(l["g"])("th",null,"電話",-1),J=Object(l["g"])("th",null,"地址",-1),B={class:"col-md-8"},L=Object(l["g"])("h3",null,"訂單細節",-1),G={class:"table"},I=Object(l["g"])("th",{style:{width:"100px"}},"訂單編號",-1),N=Object(l["g"])("th",null,"下單時間",-1),R=Object(l["g"])("th",null,"付款時間",-1),q={key:0},Y={key:1},U=Object(l["g"])("th",null,"付款狀態",-1),V={key:0,class:"text-success"},X={key:1,class:"text-muted"},H=Object(l["g"])("th",null,"總金額",-1),K=Object(l["g"])("h3",null,"選購商品",-1),Q={class:"table"},W=Object(l["g"])("thead",null,[Object(l["g"])("tr")],-1),Z={class:"text-end"},ee={class:"d-flex justify-content-end"},te={class:"form-check"},ae={class:"form-check-label",for:"flexCheckDefault"},le={key:0},ne={key:1},ce={class:"modal-footer"},re=Object(l["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function oe(e,t,a,n,c,r){return Object(l["s"])(),Object(l["f"])("div",M,[Object(l["g"])("div",A,[T,Object(l["g"])("div",D,[Object(l["g"])("div",$,[Object(l["g"])("div",z,[C,Object(l["g"])("table",S,[c.newTemp.user?(Object(l["s"])(),Object(l["f"])("tbody",F,[Object(l["g"])("tr",null,[_,Object(l["g"])("td",null,Object(l["z"])(c.newTemp.user.name),1)]),Object(l["g"])("tr",null,[P,Object(l["g"])("td",null,Object(l["z"])(c.newTemp.user.email),1)]),Object(l["g"])("tr",null,[E,Object(l["g"])("td",null,Object(l["z"])(c.newTemp.user.tel),1)]),Object(l["g"])("tr",null,[J,Object(l["g"])("td",null,Object(l["z"])(c.newTemp.user.address),1)])])):Object(l["e"])("",!0)])]),Object(l["g"])("div",B,[L,Object(l["g"])("table",G,[Object(l["g"])("tbody",null,[Object(l["g"])("tr",null,[I,Object(l["g"])("td",null,Object(l["z"])(c.newTemp.id),1)]),Object(l["g"])("tr",null,[N,Object(l["g"])("td",null,Object(l["z"])(r.date(c.newTemp.create_at)),1)]),Object(l["g"])("tr",null,[R,Object(l["g"])("td",null,[c.newTemp.paid_date?(Object(l["s"])(),Object(l["f"])("span",q,Object(l["z"])(r.date(c.newTemp.paid_date)),1)):(Object(l["s"])(),Object(l["f"])("span",Y,"時間不正確"))])]),Object(l["g"])("tr",null,[U,Object(l["g"])("td",null,[c.newTemp.is_paid?(Object(l["s"])(),Object(l["f"])("strong",V,"已付款")):(Object(l["s"])(),Object(l["f"])("span",X,"尚未付款"))])]),Object(l["g"])("tr",null,[H,Object(l["g"])("td",null,Object(l["z"])(r.convertToAmount(c.newTemp.total)),1)])])]),K,Object(l["g"])("table",Q,[W,Object(l["g"])("tbody",null,[(Object(l["s"])(!0),Object(l["f"])(l["a"],null,Object(l["w"])(c.newTemp.products,(function(e){return Object(l["s"])(),Object(l["f"])("tr",{key:e.id},[Object(l["g"])("th",null,Object(l["z"])(e.product.title),1),Object(l["g"])("td",null,Object(l["z"])(e.qty)+" / "+Object(l["z"])(e.product.unit),1),Object(l["g"])("td",Z,Object(l["z"])(r.convertToAmount(e.final_total)),1)])})),128))])]),Object(l["g"])("div",ee,[Object(l["g"])("div",te,[Object(l["F"])(Object(l["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newTemp.is_paid=e})},null,512),[[l["B"],c.newTemp.is_paid]]),Object(l["g"])("label",ae,[c.newTemp.is_paid?(Object(l["s"])(),Object(l["f"])("span",le,"已付款")):(Object(l["s"])(),Object(l["f"])("span",ne,"未付款"))])])])])])]),Object(l["g"])("div",ce,[re,Object(l["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return r.edidPay(c.newTemp.id)})}," 修改付款狀態 ")])])])}a("e9c4");var de={data:function(){return{newTemp:{total:""}}},props:["temp","orderModal"],watch:{temp:function(){this.newTemp=JSON.parse(JSON.stringify(this.temp))}},methods:{date:function(e){var t=new Date(1e3*e),a="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());return a},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$"+t.join(".")},edidPay:function(e){var t=this;this.axios.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/order/").concat(e),{data:this.newTemp}).then((function(e){alert(e.data.message),t.orderModal.hide(),t.$emit("getOrders")})).catch((function(e){alert(e.response.data.message)}))}}},se=a("6b0d"),be=a.n(se);const ie=be()(de,[["render",oe]]);var ue=ie,Oe={class:"modal-dialog"},je={class:"modal-content border-0"},ge={class:"modal-header bg-danger text-white"},fe={key:0,class:"modal-title",id:"delAllOrderModal"},pe=Object(l["g"])("span",null,"刪除訂單",-1),he=[pe],me={key:1,class:"modal-title",id:"delAllCartModal"},ve=Object(l["g"])("span",null,"刪除購物車",-1),ye=[ve],ke=Object(l["g"])("button",{class:"btn-close",type:"button","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),xe={key:0,class:"modal-body"},we=Object(l["g"])("strong",{class:"text-danger"},"是否刪除全部訂單",-1),Me=Object(l["h"])("(刪除後將無法恢復)。"),Ae=[we,Me],Te={key:1,class:"modal-body"},De=Object(l["h"])(" 是否刪除"),$e=Object(l["g"])("strong",{class:"text-danger"},"全部購物車",-1),ze=Object(l["h"])(" (刪除後將無法恢復)。"),Ce=[De,$e,ze],Se={class:"modal-footer"},Fe=Object(l["g"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1),_e={key:1,class:"btn btn-danger",type:"button"};function Pe(e,t,a,n,c,r){return Object(l["s"])(),Object(l["f"])("div",Oe,[Object(l["g"])("div",je,[Object(l["g"])("div",ge,["delAll"===a.delText?(Object(l["s"])(),Object(l["f"])("h5",fe,he)):(Object(l["s"])(),Object(l["f"])("h5",me,ye)),ke]),"delAll"===a.delText?(Object(l["s"])(),Object(l["f"])("div",xe,Ae)):(Object(l["s"])(),Object(l["f"])("div",Te,Ce)),Object(l["g"])("div",Se,[Fe,"delAll"===a.delText?(Object(l["s"])(),Object(l["f"])("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[0]||(t[0]=function(){return r.delAllOrder&&r.delAllOrder.apply(r,arguments)})},"確認刪除")):(Object(l["s"])(),Object(l["f"])("button",_e,"確認刪除"))])])])}var Ee={props:["delText"],methods:{delAllOrder:function(){this.emit("delAllOrder")}}};const Je=be()(Ee,[["render",Pe]]);var Be=Je,Le={data:function(){return{orders:[],pagination:{},temp:{},orderModal:"",delModel:"",orderAllDel:"",delText:""}},components:{Pagination:x["a"],DelModal:w["a"],OrderModal:ue,DelAllModal:Be},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.axios.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/orders?page=").concat(t)).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination})).catch((function(e){alert(e.response.data.message)}))},date:function(e){var t=new Date(1e3*e),a="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());return a},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$"+t.join(".")},judgeModal:function(e,t){switch(e){case"detail":this.temp=Object(v["a"])({},t),this.orderModal.show();break;case"delete":this.temp=Object(v["a"])({},t),this.delModel.show();break;case"delAll":this.delText=e,this.orderAllDel.show();break;default:break}},delAllOrder:function(){var e=this;this.axios.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/orders/all")).then((function(t){e.orderAllDel.show(),alert(t.data.message),e.getOrders()})).catch((function(e){alert(e.response.data.message)}))}},created:function(){this.getOrders()},mounted:function(){this.orderModal=new k.a(this.$refs.orderModal,{keyboard:!1,backdrop:"static"}),this.delModel=new k.a(this.$refs.delOrderModal,{keyboard:!1,backdrop:"static"}),this.orderAllDel=new k.a(this.$refs.orderAllDel,{keyboard:!1,backdrop:"static"})}};a("4437");const Ge=be()(Le,[["render",m]]);t["default"]=Ge},a15b:function(e,t,a){"use strict";var l=a("23e7"),n=a("e330"),c=a("44ad"),r=a("fc6a"),o=a("a640"),d=n([].join),s=c!=Object,b=o("join",",");l({target:"Array",proto:!0,forced:s||!b},{join:function(e){return d(r(this),void 0===e?",":e)}})},b0c0:function(e,t,a){var l=a("83ab"),n=a("5e77").EXISTS,c=a("e330"),r=a("9bf2").f,o=Function.prototype,d=c(o.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,b=c(s.exec),i="name";l&&!n&&r(o,i,{configurable:!0,get:function(){try{return b(s,d(this))[1]}catch(e){return""}}})},e9c4:function(e,t,a){var l=a("23e7"),n=a("da84"),c=a("d066"),r=a("2ba4"),o=a("e330"),d=a("d039"),s=n.Array,b=c("JSON","stringify"),i=o(/./.exec),u=o("".charAt),O=o("".charCodeAt),j=o("".replace),g=o(1..toString),f=/[\uD800-\uDFFF]/g,p=/^[\uD800-\uDBFF]$/,h=/^[\uDC00-\uDFFF]$/,m=function(e,t,a){var l=u(a,t-1),n=u(a,t+1);return i(p,e)&&!i(h,n)||i(h,e)&&!i(p,l)?"\\u"+g(O(e,0),16):e},v=d((function(){return'"\\udf06\\ud834"'!==b("\udf06\ud834")||'"\\udead"'!==b("\udead")}));b&&l({target:"JSON",stat:!0,forced:v},{stringify:function(e,t,a){for(var l=0,n=arguments.length,c=s(n);l<n;l++)c[l]=arguments[l];var o=r(b,null,c);return"string"==typeof o?j(o,f,m):o}})}}]);
//# sourceMappingURL=chunk-18dfd517.02d783f2.js.map